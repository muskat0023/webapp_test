{"ast":null,"code":"// src/pages/SimulatorPage.js\nimport React,{useState,useEffect}from\"react\";import{useParams}from\"react-router-dom\";import axios from\"axios\";import SimulatorHeader from\"../components/SimulatorHeader\";import SimulatorInputForm from\"../components/SimulatorInputForm\";import SimulatorContentContainer from\"../components/SimulatorContentContainer\";import SimulatorFooter from\"../components/SimulatorFooter\";import\"./SimulatorPage.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SimulatorPage=()=>{const{id}=useParams();const[modelInfo,setModelInfo]=useState(null);const[inputs,setInputs]=useState([]);const[isSimulated,setIsSimulated]=useState(false);const[simulationResult,setSimulationResult]=useState(null);useEffect(()=>{fetchModelInfo();},[]);const fetchModelInfo=async()=>{try{const response=await axios.get(\"http://localhost:5000/api/model-info\");const modelData=response.data;console.log(\"Model Data:\",modelData);setModelInfo(modelData);initializeInputs(modelData.inputs);}catch(error){console.error(\"Error fetching model info:\",error);}};const initializeInputs=inputParams=>{const initialInputs=inputParams.map(param=>({...param,value:\"\",error:\"\"}));console.log(\"Initialized Inputs:\",initialInputs);setInputs(initialInputs);};const handleInputChange=(index,value)=>{const newInputs=[...inputs];newInputs[index].value=value;console.log(\"Updated Inputs:\",newInputs);setInputs(newInputs);};const validateInputs=()=>{const regex=/^\\d+(\\.\\d+)?$/;const updatedInputs=inputs.map(input=>{if(input.value===\"\"){return{...input,error:\"값을 입력해주세요.\"};}if(!regex.test(input.value)){return{...input,error:\"유효하지 않은 입력입니다.\"};}const numericValue=parseFloat(input.value);if(isNaN(numericValue)||numericValue<input.min||numericValue>input.max){return{...input,error:\"\\uAC12\\uC740 \".concat(input.min,\"\\uC5D0\\uC11C \").concat(input.max,\" \\uC0AC\\uC774\\uC5EC\\uC57C \\uD569\\uB2C8\\uB2E4.\")};}return{...input,error:\"\"};});console.log(\"Validated Inputs:\",updatedInputs);setInputs(updatedInputs);return updatedInputs.every(input=>input.error===\"\");};const handleSimulate=async()=>{if(validateInputs()){try{const inputData=inputs.map(input=>parseFloat(input.value));console.log(\"Input Data:\",inputData);const response=await axios.post(\"http://localhost:5000/api/predict\",{data:inputData});const predictions=response.data.predictions[0];console.log(\"Predictions:\",predictions);const formattedResult=modelInfo.outputs.map((output,index)=>\"\".concat(output.name,\": \").concat(predictions[index].toFixed(2))).join(\", \");console.log(\"Formatted Result:\",formattedResult);setSimulationResult(formattedResult);setIsSimulated(true);}catch(error){console.error(\"Error simulating:\",error);}}};if(!modelInfo){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"simulator-page\",children:[/*#__PURE__*/_jsx(SimulatorHeader,{title:\"Simulator\",onSimulate:handleSimulate}),/*#__PURE__*/_jsxs(\"div\",{className:\"simulator-content\",children:[/*#__PURE__*/_jsx(SimulatorInputForm,{inputs:inputs,onChange:handleInputChange}),/*#__PURE__*/_jsx(SimulatorContentContainer,{isSimulated:isSimulated,description:\"Input parameter description\",report:simulationResult})]}),/*#__PURE__*/_jsx(SimulatorFooter,{})]});};export default SimulatorPage;","map":{"version":3,"names":["React","useState","useEffect","useParams","axios","SimulatorHeader","SimulatorInputForm","SimulatorContentContainer","SimulatorFooter","jsx","_jsx","jsxs","_jsxs","SimulatorPage","id","modelInfo","setModelInfo","inputs","setInputs","isSimulated","setIsSimulated","simulationResult","setSimulationResult","fetchModelInfo","response","get","modelData","data","console","log","initializeInputs","error","inputParams","initialInputs","map","param","value","handleInputChange","index","newInputs","validateInputs","regex","updatedInputs","input","test","numericValue","parseFloat","isNaN","min","max","concat","every","handleSimulate","inputData","post","predictions","formattedResult","outputs","output","name","toFixed","join","children","className","title","onSimulate","onChange","description","report"],"sources":["C:/Coding_kdh/Y2023/007_react/webapp_simulator_v1/frontend/src/pages/SimulatorPage.js"],"sourcesContent":["// src/pages/SimulatorPage.js\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport SimulatorHeader from \"../components/SimulatorHeader\";\r\nimport SimulatorInputForm from \"../components/SimulatorInputForm\";\r\nimport SimulatorContentContainer from \"../components/SimulatorContentContainer\";\r\nimport SimulatorFooter from \"../components/SimulatorFooter\";\r\nimport \"./SimulatorPage.css\";\r\n\r\nconst SimulatorPage = () => {\r\n  const { id } = useParams();\r\n  const [modelInfo, setModelInfo] = useState(null);\r\n  const [inputs, setInputs] = useState([]);\r\n  const [isSimulated, setIsSimulated] = useState(false);\r\n  const [simulationResult, setSimulationResult] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetchModelInfo();\r\n  }, []);\r\n\r\n  const fetchModelInfo = async () => {\r\n    try {\r\n      const response = await axios.get(`http://localhost:5000/api/model-info`);\r\n      const modelData = response.data;\r\n      console.log(\"Model Data:\", modelData);\r\n      setModelInfo(modelData);\r\n      initializeInputs(modelData.inputs);\r\n    } catch (error) {\r\n      console.error(\"Error fetching model info:\", error);\r\n    }\r\n  };\r\n\r\n  const initializeInputs = (inputParams) => {\r\n    const initialInputs = inputParams.map((param) => ({\r\n      ...param,\r\n      value: \"\",\r\n      error: \"\",\r\n    }));\r\n    console.log(\"Initialized Inputs:\", initialInputs);\r\n    setInputs(initialInputs);\r\n  };\r\n\r\n  const handleInputChange = (index, value) => {\r\n    const newInputs = [...inputs];\r\n    newInputs[index].value = value;\r\n    console.log(\"Updated Inputs:\", newInputs);\r\n    setInputs(newInputs);\r\n  };\r\n\r\n  const validateInputs = () => {\r\n    const regex = /^\\d+(\\.\\d+)?$/;\r\n    const updatedInputs = inputs.map((input) => {\r\n      if (input.value === \"\") {\r\n        return { ...input, error: \"값을 입력해주세요.\" };\r\n      }\r\n      if (!regex.test(input.value)) {\r\n        return { ...input, error: \"유효하지 않은 입력입니다.\" };\r\n      }\r\n      const numericValue = parseFloat(input.value);\r\n      if (\r\n        isNaN(numericValue) ||\r\n        numericValue < input.min ||\r\n        numericValue > input.max\r\n      ) {\r\n        return {\r\n          ...input,\r\n          error: `값은 ${input.min}에서 ${input.max} 사이여야 합니다.`,\r\n        };\r\n      }\r\n      return { ...input, error: \"\" };\r\n    });\r\n    console.log(\"Validated Inputs:\", updatedInputs);\r\n    setInputs(updatedInputs);\r\n    return updatedInputs.every((input) => input.error === \"\");\r\n  };\r\n\r\n  const handleSimulate = async () => {\r\n    if (validateInputs()) {\r\n      try {\r\n        const inputData = inputs.map((input) => parseFloat(input.value));\r\n        console.log(\"Input Data:\", inputData);\r\n        const response = await axios.post(\"http://localhost:5000/api/predict\", {\r\n          data: inputData,\r\n        });\r\n        const predictions = response.data.predictions[0];\r\n        console.log(\"Predictions:\", predictions);\r\n        const formattedResult = modelInfo.outputs\r\n          .map(\r\n            (output, index) =>\r\n              `${output.name}: ${predictions[index].toFixed(2)}`\r\n          )\r\n          .join(\", \");\r\n        console.log(\"Formatted Result:\", formattedResult);\r\n        setSimulationResult(formattedResult);\r\n        setIsSimulated(true);\r\n      } catch (error) {\r\n        console.error(\"Error simulating:\", error);\r\n      }\r\n    }\r\n  };\r\n\r\n  if (!modelInfo) {\r\n    return <div>Loading...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"simulator-page\">\r\n      <SimulatorHeader title=\"Simulator\" onSimulate={handleSimulate} />\r\n      <div className=\"simulator-content\">\r\n        <SimulatorInputForm inputs={inputs} onChange={handleInputChange} />\r\n        <SimulatorContentContainer\r\n          isSimulated={isSimulated}\r\n          description=\"Input parameter description\"\r\n          report={simulationResult}\r\n        />\r\n      </div>\r\n      <SimulatorFooter />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SimulatorPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}